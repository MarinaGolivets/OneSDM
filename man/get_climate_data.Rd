% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_osf.R
\name{get_climate_data}
\alias{get_climate_data}
\title{Download climate data files from the OneSDM OSF project}
\usage{
get_climate_data(
  climate_dir = NULL,
  resolution = 10L,
  climate_scenario = "current",
  climate_model = "current",
  year = "1981-2010",
  var_names = NULL,
  verbose = TRUE
)
}
\arguments{
\item{climate_dir}{Character scalar. Destination directory where climate data
files will be saved. The directory will be created if it does not exist.
This cannot be \code{NULL}.}

\item{resolution}{Integer scalar. Spatial resolution; one of \code{5L}, \code{10L}, or
\code{20L}.}

\item{climate_scenario}{Character scalar. Climate scenario; one of \code{current},
\code{ssp126}, \code{ssp370}, \code{ssp585}.}

\item{climate_model}{Character scalar. Abbreviation of Global Circulation
Models; one of \code{current}, \code{gfdl}, \code{ipsl}, \code{mpi}, \code{mri}, \code{ukesm1}.}

\item{year}{Character scalar. Time period; one of \code{1981-2010}, \code{2011-2040},
\code{2041-2070}, \code{2071-2100}.}

\item{var_names}{Character vector of climate variable codes to download. See
\link{climate_data} for the list of valid variable names.}

\item{verbose}{Logical scalar. If \code{TRUE}, prints progress and informative
messages.}
}
\value{
Invisibly returns \code{NULL}. On success, the requested \code{.tif} files are
written to disk.
}
\description{
Downloads selected climate raster files (GeoTIFF) from the OneSDM Open
Science Framework (OSF) storage based on spatial resolution, climate
scenario, climate model, time period, and variable names. The function
validates inputs, locates the corresponding files in the OSF project, creates
local directories as needed, downloads the files, and verifies their
integrity.
}
\details{
\itemize{
\item The function filters the \link{climate_data} data to identify files
matching the requested parameter combination, ensures a single OSF directory,
lists files via the \code{osfr} package, and joins metadata to obtain download
links.
\item GeoTIFF files are downloaded with \code{\link[httr:GET]{httr::GET()}} (with a maximum timeout of
5 minutes per file) into a mirrored subdirectory structure under the
\code{climate_dir}. Each file is validated as a GeoTIFF using
\code{\link[ecokit:check_tiff]{ecokit::check_tiff()}}. Failed downloads are reported.
\item Input validation is strict; any invalid values, missing combinations, or
inconsistent OSF directory layouts will trigger informative errors.
}
}
\examples{
\dontrun{
ecokit::load_packages(fs, terra)

# Create a temporary directory for climate data
tmp_dir <- fs::path_temp("onesdm_climate123")
fs::dir_create(tmp_dir)

# Example usage of get_climate_data
get_climate_data(
  climate_dir = tmp_dir,
  resolution = 20L,
  climate_scenario = "current",
  climate_model = "current",
  year = "1981-2010",
  var_names = c("bio1", "bio12"),
  verbose = TRUE)

# List downloaded files in the subdirectory of combination of parameters
list_files <- list.files(
  fs::path(tmp_dir, "1981_2010_res_20"), full.names = TRUE)
print(list_files)

# Load the downloaded files as a SpatRaster stack
terra::rast(list_files)

}

}
\seealso{
\itemize{
\item \link{climate_data} for the metadata table used to resolve files.
\item \link[ecokit:chelsa_var_info]{ecokit::chelsa_var_info} and \href{https://chelsa-climate.org/}{CHELSA}
webpage for details on climatic variables description.
}
}
\author{
Ahmed El-Gabbas
}
